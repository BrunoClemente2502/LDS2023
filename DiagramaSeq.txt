title C#1 - Diagrama de sequência de acordo com a variante Curry & Grace

actor Utilizador
participant Controller
participant View
participant Model

group while(comando != Exit)
activate Utilizador
activate Controller
Utilizador->Controller: IniciarPrograma()
activate View
deactivate Utilizador
Controller->View: ApresentarInstrucoes()
deactivate Controller
activate Model
View->Model:ListarComandos()
View<--Model:Retorna lista de comandos registados e descrições
deactivate Model
activate Utilizador
View -->Utilizador: Imprime mensagem com instruções
deactivate View
deactivate Utilizador
space
activate Controller
activate View
Controller->View: ImprimirPromptInserirInput()
deactivate Controller
activate Utilizador 
Utilizador <-- View: Imprime prompt a indicar para inserir comando
space
Utilizador-->View: Insere comando e path para imagem
deactivate Utilizador
space
activate Controller
View --> Controller: Retorna comando inserido
deactivate View
deactivate Controller

group CASO 1: while(Comando inválido)
space
activate Controller 
activate Model 
Controller->Model: ValidarComando(comando)
Controller<--Model: throw CommandNotValid
deactivate Model
Controller->Controller: HandleException(CommandNotValid)
activate View 
Controller->View: ImprimirPromptInserirInput()
deactivate Controller
activate Utilizador 
Utilizador <-- View: Imprime prompt a indicar para inserir comando
space
Utilizador-->View: Insere comando e path para imagem
deactivate Utilizador
space
activate Controller
View --> Controller: Retorna comando inserido
deactivate View
deactivate Controller
end

group CASO2: while(Path para imagem inválido)
space
activate Controller 
activate Model 
Controller->Model: ValidarComando(comando)
Controller<--Model: throw InvalidPath
deactivate Model
Controller->Controller: HandleException(InvalidPath)
space
activate View 
Controller->View: ImprimirPromptInserirInput()
deactivate Controller
activate Utilizador 
Utilizador <-- View: Imprime prompt a indicar para inserir comando
space
Utilizador-->View: Insere comando e path para imagem
deactivate Utilizador
space
activate Controller
View --> Controller: Retorna comando inserido
deactivate View
deactivate Controller
end 


group CASO 3: Comando e path de imagem válidos
space 
activate Model 
activate Controller 
Controller->Model: ValidarComando(comando)
Model-->Controller:Retorna path da imagem e ação a executar
deactivate Model
deactivate Controller

alt FALHA: Execução da operação com erro
activate Controller 
activate Model 
Controller->Model: ExecutarComando(comando, path)
Model-->Controller: throw OperationError
deactivate Model
space
activate View 
Controller->Controller: HandleException(OperationError)
Controller->View: ImprimirMensagemErro()
deactivate Controller
activate Utilizador 
Utilizador <<--View: Mensagem a indicar erro na execução da operação
deactivate View
note right of Utilizador #FFE6E8:Exit(1)
deactivate Utilizador

else SUCESSO: Execução da operação bem sucedida
activate Controller 
activate Model 
Controller->Model: ExecutarComando(comando, path)
deactivate Controller
space
activate View
Model-->View: ApresentarResultados()
deactivate Model
space
space
activate Utilizador 
Utilizador <<-- View: Mostra estatísticas ou path para a imagem alterada
deactivate View
deactivate Utilizador
end
end
end


group Comando == Exit
space
activate Utilizador 
activate View 
Utilizador-->View: Selecciona sair do programa
deactivate Utilizador
space
activate Controller
View-->Controller: Retorna comando inserido
Controller->View: ImprimirMensagemDespedida()
deactivate Controller
activate Utilizador
View-->Utilizador: Imprime mensagem de despedida
deactivate View
note right of Utilizador #F5FFFA:Exit(0)
deactivate Utilizador 
end



space
destroy Utilizador
destroy Controller
destroy View
destroy Model
